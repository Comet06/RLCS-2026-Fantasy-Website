import { players } from "./player_data.js";

export const members = [
  {name: 'Flip Lord', shortname: 'flip'},
  {name: 'Doofenschmirtz inc.',  shortname: 'doof'},
  {name: 'Goofy Goobers',  shortname: 'goof'},
  {name: '24 Karat Gold',  shortname: 'gold'},
  {name: 'Skibbideeznuts',  shortname: 'skib'},
  {name: 'Team Canada',  shortname: 'cana'},
  {name: 'Potus',  shortname: 'pots'},
  {name: 'Brother Yuri',  shortname: 'yuri'},
  {name: 'Mahtoose',  shortname: 'maht'},
  {name: 'Dwayne "The Sock" Johnson',  shortname: 'sock'},
]
export let points = {
    'playin' : [200, 300],
    'groupA' : [300, 400],
    'groupB' : [300, 400],
    'playoff' : [400, 600]
}
let Regional1 = {
  'flip' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'doof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'goof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'gold' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'skib' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'cana' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'pots' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'yuri' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'maht' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'sock' : ['', '', '', 0, '', '', '', 0, '', '', '', 0]
}
let Regional2 = {
  'flip' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'doof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'goof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'gold' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'skib' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'cana' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'pots' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'yuri' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'maht' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'sock' : ['', '', '', 0, '', '', '', 0, '', '', '', 0]
}
let Regional3 = {
  'flip' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'doof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'goof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'gold' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'skib' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'cana' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'pots' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'yuri' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'maht' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'sock' : ['', '', '', 0, '', '', '', 0, '', '', '', 0]
}
let Major1 = {
  'flip' : [0],
  'doof' : [0],
  'goof' : [0],
  'gold' : [0],
  'skib' : [0],
  'cana' : [0],
  'pots' : [0],
  'yuri' : [0],
  'maht' : [0],
  'sock' : [0]
}
let Regional4 = {
  'flip' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'doof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'goof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'gold' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'skib' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'cana' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'pots' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'yuri' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'maht' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'sock' : ['', '', '', 0, '', '', '', 0, '', '', '', 0]
}
let Regional5 = {
  'flip' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'doof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'goof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'gold' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'skib' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'cana' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'pots' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'yuri' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'maht' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'sock' : ['', '', '', 0, '', '', '', 0, '', '', '', 0]
}
let Regional6 = {
  'flip' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'doof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'goof' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'gold' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'skib' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'cana' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'pots' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'yuri' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'maht' : ['', '', '', 0, '', '', '', 0, '', '', '', 0],
  'sock' : ['', '', '', 0, '', '', '', 0, '', '', '', 0]
}
let Major2 = {
  'flip' : [0],
  'doof' : [0],
  'goof' : [0],
  'gold' : [0],
  'skib' : [0],
  'cana' : [0],
  'pots' : [0],
  'yuri' : [0],
  'maht' : [0],
  'sock' : [0]
}
let Championship = {
  //(max): PISemi(6), PIQuals(4), GASemi(6), GAQuals(4), GBSemi(6), GBQuals(4), POSemi(8), POFinals(3)
  'flip' : [0, 0, 0, 0, 0, 0, 0, 0],
  'doof' : [0, 0, 0, 0, 0, 0, 0, 0],
  'goof' : [0, 0, 0, 0, 0, 0, 0, 0],
  'gold' : [0, 0, 0, 0, 0, 0, 0, 0],
  'skib' : [0, 0, 0, 0, 0, 0, 0, 0],
  'cana' : [0, 0, 0, 0, 0, 0, 0, 0],
  'pots' : [0, 0, 0, 0, 0, 0, 0, 0],
  'yuri' : [0, 0, 0, 0, 0, 0, 0, 0],
  'maht' : [0, 0, 0, 0, 0, 0, 0, 0],
  'sock' : [0, 0, 0, 0, 0, 0, 0, 0],
}
let prizes = {
  'flip' : ["$0.00", "$0.00", "$0.00", "$0.00"],
  'doof' : ["$0.00", "$0.00", "$0.00", "$0.00"],
  'goof' : ["$0.00", "$0.00", "$0.00", "$0.00"],
  'gold' : ["$0.00", "$0.00", "$0.00", "$0.00"],
  'skib' : ["$0.00", "$0.00", "$0.00", "$0.00"],
  'cana' : ["$0.00", "$0.00", "$0.00", "$0.00"],
  'pots' : ["$0.00", "$0.00", "$0.00", "$0.00"],
  'yuri' : ["$0.00", "$0.00", "$0.00", "$0.00"],
  'maht' : ["$0.00", "$0.00", "$0.00", "$0.00"],
  'sock' : ["$0.00", "$0.00", "$0.00", "$0.00"],
}

let EventSums = { //*****Do not manipulate this data*****
  // Regionals 1-6
  'flip' : [0, 0, 0, 0, 0, 0],
  'doof' : [0, 0, 0, 0, 0, 0],
  'goof' : [0, 0, 0, 0, 0, 0],
  'gold' : [0, 0, 0, 0, 0, 0],
  'skib' : [0, 0, 0, 0, 0, 0],
  'cana' : [0, 0, 0, 0, 0, 0],
  'pots' : [0, 0, 0, 0, 0, 0],
  'yuri' : [0, 0, 0, 0, 0, 0],
  'maht' : [0, 0, 0, 0, 0, 0],
  'sock' : [0, 0, 0, 0, 0, 0],
}
let splitSums = { //*****Do not manipulate this data*****
  // split 1-2, Championship
  'flip' : [0, 0, 0],
  'doof' : [0, 0, 0],
  'goof' : [0, 0, 0],
  'gold' : [0, 0, 0],
  'skib' : [0, 0, 0],
  'cana' : [0, 0, 0],
  'pots' : [0, 0, 0],
  'yuri' : [0, 0, 0],
  'maht' : [0, 0, 0],
  'sock' : [0, 0, 0],
}
let champRounds = { //*****Do not manipulate this data*****
  // this is for calculating the totals for playin, groupA, groupB, playoffs, total
  'flip' : [0, 0, 0, 0, 0],
  'doof' : [0, 0, 0, 0, 0],
  'goof' : [0, 0, 0, 0, 0],
  'gold' : [0, 0, 0, 0, 0],
  'skib' : [0, 0, 0, 0, 0],
  'cana' : [0, 0, 0, 0, 0],
  'pots' : [0, 0, 0, 0, 0],
  'yuri' : [0, 0, 0, 0, 0],
  'maht' : [0, 0, 0, 0, 0],
  'sock' : [0, 0, 0, 0, 0],
}
let playerScores = { //*****Do not manipulate this data*****
    'flip': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'doof': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'goof': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'gold': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'skib': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'cana': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'pots': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'yuri': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'maht': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    'sock': [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
};


let path1 = ''
let path = '/RLCS-2026-Fantasy-Website'
window.addEventListener('load', function() {
  if (window.location.pathname === `${path}/index.html`) {
    console.log('Index page has loaded!');
    deployScores()
    deployPrize()
  } else if (window.location.pathname === `${path}/regional_1.html`) {
    console.log('Regional 1 page has loaded!');
    deployReg(Regional1)
  } else if (window.location.pathname === `${path}/regional_2.html`) {
    console.log('Regional 2 page has loaded!');
    deployReg(Regional2)
  } else if (window.location.pathname === `${path}/regional_3.html`) {
    console.log('Regional 3 page has loaded!');
    deployReg(Regional3)
  } else if (window.location.pathname === `${path}/major_1.html`) {
    console.log('Major 1 page has loaded!');
    deployMaj(Major1)
  } else if (window.location.pathname === `${path}/regional_4.html`) {
    console.log('Regional 4 page has loaded!');
    deployReg(Regional4)
  } else if (window.location.pathname === `${path}/regional_5.html`) {
    console.log('Regional 5 page has loaded!');
    deployReg(Regional5)
  } else if (window.location.pathname === `${path}/regional_6.html`) {
    console.log('Regional 6 page has loaded!');
    deployReg(Regional6)
  } else if (window.location.pathname === `${path}/major_2.html`) {
    console.log('Major 2 page has loaded!');
    deployMaj(Major2)
  } else if (window.location.pathname === `${path}/championship.html`) {
    console.log('Championship page has loaded!');
    deployChamp()
  } else if (window.location.pathname === `${path}/info.html`) {
    console.log('Info page has loaded!');
  } else {
    console.log("main event listener is working but nothing else is")
  }
});

function deployReg(event){
  members.forEach((id) =>{
    for (let i = 0; i < 12; i += 4){
      event[id.shortname][i+1] = getTeam(players, event[id.shortname][i])
      event[id.shortname][i+2] = getRegion(players, event[id.shortname][i])
      const tableBody = document.getElementById('regionalScoreCard');
      const newRow = document.createElement('tr');
      const teamName = document.createElement('td');
      const PlayerCell = document.createElement('td');
      const PlayerTeam = document.createElement('td');
      const PlayerRegion = document.createElement('td');
      const PlayerPoints = document.createElement('td');
      
      teamName.id = id.shortname
      PlayerCell.id = id.shortname
      PlayerTeam.id = id.shortname
      PlayerRegion.id = id.shortname
      PlayerPoints.id = id.shortname
      teamName.textContent = id.name
      PlayerCell.textContent = event[id.shortname][i]
      PlayerTeam.textContent = event[id.shortname][i+1]
      PlayerRegion.textContent = event[id.shortname][i+2]
      PlayerPoints.textContent = event[id.shortname][i+3]
      

      newRow.appendChild(teamName);
      newRow.appendChild(PlayerCell);
      newRow.appendChild(PlayerTeam);
      newRow.appendChild(PlayerRegion);
      newRow.appendChild(PlayerPoints);
      
      tableBody.appendChild(newRow);
    }
  })
}
function deployMaj(event){
  members.forEach((id) =>{
    const tableBody = document.getElementById('majorScoreCard');
    const newRow = document.createElement('tr');
    const teamName = document.createElement('td');
    const teamPoints = document.createElement('td');
    
    teamName.id = id.shortname
    teamPoints.id = id.shortname
    teamName.textContent = id.name
    teamPoints.textContent = event[id.shortname][0]
    
    newRow.appendChild(teamName);
    newRow.appendChild(teamPoints);
    
    tableBody.appendChild(newRow);
  })
}
function deployChamp(){
  console.log('champ function working')
  // ChampionshipBracket()
  members.forEach((id)=>{
    champRounds[id.shortname][0] = Championship[`${id.shortname}`][0]*points['playin'][0]+Championship[`${id.shortname}`][1]*points['playin'][1]
    champRounds[id.shortname][1] = Championship[`${id.shortname}`][2]*points['groupA'][0]+Championship[`${id.shortname}`][3]*points['groupA'][1]
    champRounds[id.shortname][2] = Championship[`${id.shortname}`][4]*points['groupB'][0]+Championship[`${id.shortname}`][5]*points['groupB'][1]
    champRounds[id.shortname][3] = Championship[`${id.shortname}`][6]*points['playoff'][0]+Championship[`${id.shortname}`][7]*points['playoff'][1]
    champRounds[id.shortname][4] = champRounds[id.shortname][0] + champRounds[id.shortname][1] + champRounds[id.shortname][2] + champRounds[id.shortname][3]
    for (let i = 0; i<5; i += 5){
      const tableBody = document.getElementById('championshipScoreCard');
      const newRow = document.createElement('tr');
      const teamName = document.createElement('td');
      const playinCell = document.createElement('td');
      const groupACell = document.createElement('td');
      const groupBCell = document.createElement('td');
      const playoffCell = document.createElement('td');
      const totalCell = document.createElement('td');
      
      teamName.id = id.shortname
      playinCell.id = id.shortname
      groupACell.id = id.shortname
      groupBCell.id = id.shortname
      playoffCell.id = id.shortname
      totalCell.id = id.shortname
      teamName.textContent = id.name
      playinCell.textContent = champRounds[id.shortname][0]
      groupACell.textContent = champRounds[id.shortname][1]
      groupBCell.textContent = champRounds[id.shortname][2]
      playoffCell.textContent = champRounds[id.shortname][3]
      totalCell.textContent = champRounds[id.shortname][4]
      
      newRow.appendChild(teamName);
      newRow.appendChild(playinCell);
      newRow.appendChild(groupACell);
      newRow.appendChild(groupBCell);
      newRow.appendChild(playoffCell);
      newRow.appendChild(totalCell);
      
      tableBody.appendChild(newRow);
    }
  })
}
function deployPrize(){
  members.forEach((id) =>{
    for (let i = 0; i<4; i += 4){
      const tableBody = document.getElementById('prizeTable');
      const newRow = document.createElement('tr');
      const teamName = document.createElement('td');
      const split1Winnings = document.createElement('td');
      const split2Winnings = document.createElement('td');
      const championshipWinnings = document.createElement('td');
      const totalWinnings = document.createElement('td');
      
      teamName.id = id.shortname
      split1Winnings.id = id.shortname
      split2Winnings.id = id.shortname
      championshipWinnings.id = id.shortname
      totalWinnings.id = id.shortname
      teamName.textContent = id.name
      split1Winnings.textContent = prizes[id.shortname][i]
      split2Winnings.textContent = prizes[id.shortname][i+1]
      championshipWinnings.textContent = prizes[id.shortname][i+2]
      totalWinnings.textContent = prizes[id.shortname][i+3]
      

      newRow.appendChild(teamName);
      newRow.appendChild(split1Winnings);
      newRow.appendChild(split2Winnings);
      newRow.appendChild(championshipWinnings);
      newRow.appendChild(totalWinnings);
      
      tableBody.appendChild(newRow);
    }
  })
}
function deployScores(){
  members.forEach((id)=>{
    for (let i = 3; i < 12; i += 4) {//adding regional points from each player into event sums
      EventSums[id.shortname][0] += Regional1[id.shortname][i];
      EventSums[id.shortname][1] += Regional2[id.shortname][i];
      EventSums[id.shortname][2] += Regional3[id.shortname][i];
      EventSums[id.shortname][3] += Regional4[id.shortname][i];
      EventSums[id.shortname][4] += Regional5[id.shortname][i];
      EventSums[id.shortname][5] += Regional6[id.shortname][i];
    }
    for (let i = 0; i < 5; i++) {// Adding all championship points into splitSums index 2
      splitSums[id.shortname][2] += champRounds[id.shortname][i]
    }
    // Adding each split event up into one sum for prize distribution
    splitSums[id.shortname][0] = EventSums[id.shortname][0] + EventSums[id.shortname][1] + EventSums[id.shortname][2] + Major1[id.shortname][0]*3
    splitSums[id.shortname][1] = EventSums[id.shortname][3] + EventSums[id.shortname][4] + EventSums[id.shortname][5] + Major2[id.shortname][0]*3
    // Deploying scores to the array of playerScores Objects
    playerScores[id.shortname] = [EventSums[id.shortname][0], EventSums[id.shortname][1], EventSums[id.shortname][2], Major1[id.shortname][0]*3, splitSums[id.shortname][0], 
                                  EventSums[id.shortname][3], EventSums[id.shortname][4], EventSums[id.shortname][5], Major2[id.shortname][0]*3, splitSums[id.shortname][1], 
                                  splitSums[id.shortname][2]*5, splitSums[id.shortname][0] + splitSums[id.shortname][1] + splitSums[id.shortname][2]*5];
    // deploying scores to table
    const tableBody = document.getElementById('totalScores');
    const newRow = document.createElement('tr');
    const teamName = document.createElement('td');
    const reg1Total = document.createElement('td');
    const reg2Total = document.createElement('td');
    const reg3Total = document.createElement('td');
    const maj1Total = document.createElement('td');
    const split1Total = document.createElement('td');
    const reg4Total = document.createElement('td');
    const reg5Total = document.createElement('td');
    const reg6Total = document.createElement('td');
    const maj2Total = document.createElement('td');
    const split2Total = document.createElement('td');
    const championshipTotal = document.createElement('td');
    const total = document.createElement('td');
    
    teamName.id = id.shortname
    reg1Total.id = id.shortname
    reg2Total.id = id.shortname
    reg3Total.id = id.shortname
    maj1Total.id = id.shortname
    split1Total.id = id.shortname
    reg4Total.id = id.shortname
    reg5Total.id = id.shortname
    reg6Total.id = id.shortname
    maj2Total.id = id.shortname
    split2Total.id = id.shortname
    championshipTotal.id = id.shortname
    total.id = id.shortname

    teamName.textContent = id.name
    reg1Total.textContent = playerScores[id.shortname][0]
    reg2Total.textContent = playerScores[id.shortname][1]
    reg3Total.textContent = playerScores[id.shortname][2]
    maj1Total.textContent = playerScores[id.shortname][3]
    split1Total.textContent = playerScores[id.shortname][4]
    reg4Total.textContent = playerScores[id.shortname][5]
    reg5Total.textContent = playerScores[id.shortname][6]
    reg6Total.textContent = playerScores[id.shortname][7]
    maj2Total.textContent = playerScores[id.shortname][8]
    split2Total.textContent = playerScores[id.shortname][9]
    championshipTotal.textContent = playerScores[id.shortname][10]
    total.textContent = playerScores[id.shortname][11]
    

    newRow.appendChild(teamName);
    newRow.appendChild(reg1Total)
    newRow.appendChild(reg2Total)
    newRow.appendChild(reg3Total)
    newRow.appendChild(maj1Total)
    newRow.appendChild(split1Total)
    newRow.appendChild(reg4Total)
    newRow.appendChild(reg5Total)
    newRow.appendChild(reg6Total)
    newRow.appendChild(maj2Total)
    newRow.appendChild(split2Total)
    newRow.appendChild(championshipTotal)
    newRow.appendChild(total)
    
    tableBody.appendChild(newRow);
  })
}

function getRegion(playerData, searchTerm) {
  const player = playerData.find(player => player.name === searchTerm);
  return player ? player.region : null;
}
function getTeam(playerData, searchTerm) {
  const player = playerData.find(player => player.name === searchTerm);
  return player ? player.team : null;
}